<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cubisme A-Frame</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>

    <script>
      AFRAME.registerComponent("mylink", {
        schema: {
          href: { type: "string" }
        },
        init: function () {
          this.el.addEventListener("click", () => {
            window.location.href = this.data.href;
          });
        }
      });
    </script>
  </head>

  <body>

    <a-scene cursor="rayOrigin: mouse">

      <a-assets>
        <img id="fons" src="fons.jpg" />
        <img id="texturaterra" src="texturaterra.jpg" />
        <img id="guernica" src="onvni.png" />        
        <img id="cara" src="pedrolo.jpg" />            
        <img id="bicicletes" src="2.jpg" />
      </a-assets>

      <a-sky src="#fons"></a-sky>

      <a-plane position="0 0 0"
               rotation="-90 0 0"
               width="100"
               height="100"
               src="#texturaterra">
      </a-plane>

      <a-text 
        value="El Cubisme"
        color="white"
        position="-2 6 -8"
        width="8">
      </a-text>

      <a-plane
        id="guernicaObj"
        position="-1 4 -8"
        width="8"
        height="3"
        src="#guernica">
      </a-plane>

      <a-box
        id="cub"
        position="-4 3 -4"
        rotation="0 0 50"
        depth="1"
        height="1"
        width="1"
        src="#cara"
        animation="property: rotation; to: 0 360 0; dur: 4000; loop: true">
      </a-box>

      <!-- ESTE ES EL QUE LLEVA AL LINK -->
      <a-dodecahedron
        id="esmou"
        position="6 2 -6"
        rotation="0 30 0"
        radius="2"
        src="#bicicletes"
        mylink="href: https://ivanculla.github.io/web3d/ex6/assets/ex6.html">
      </a-dodecahedron>

    </a-scene>

    <script>
      let figura1 = document.querySelector("#esmou");
      figura1.addEventListener("click", () => {
        figura1.setAttribute("animation__float", {
          property: "position",
          to: "6 8 -6",
          dur: 1500,
          dir: "alternate",
          loop: true,
          easing: "easeInOutSine"
        });

        figura1.setAttribute("animation__spin", {
          property: "rotation",
          to: "0 720 0",
          dur: 1200,
          loop: true
        });
      });
    </script>

  </body>
</html>
